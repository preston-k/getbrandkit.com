// Generated by CoffeeScript 1.12.4
var structuredStackTrace, toJSON;

toJSON = function() {
  var result;
  result = {};
  Object.keys(this).forEach((function(_this) {
    return function(key) {
      var val;
      val = _this[key];
      if (key === 'toJSON') {

      } else if (key === 'this') {
        return result[key] = '' + val;
      } else if (typeof val === 'function') {
        return result[key] = '' + val;
      } else {
        return result[key] = _this[key];
      }
    };
  })(this));
  return result;
};

structuredStackTrace = function(err, stack) {
  var frame, i, len, results;
  results = [];
  for (i = 0, len = stack.length; i < len; i++) {
    frame = stack[i];
    results.push((function(frame) {
      var _frame;
      _frame = Object.create({}, frame);
      _frame['this'] = frame.getThis();
      try {
        _frame.type = frame.getTypeName();
      } catch (error) {
        err = error;
        _frame.type = '';
      }
      _frame.isTop = frame.isToplevel();
      _frame.isEval = frame.isEval();
      _frame.origin = frame.getEvalOrigin();
      _frame.script = frame.getScriptNameOrSourceURL();
      _frame.fun = frame.getFunction();
      _frame.name = frame.getFunctionName();
      _frame.method = frame.getMethodName();
      _frame.path = frame.getFileName();
      _frame.line = frame.getLineNumber();
      _frame.col = frame.getColumnNumber();
      _frame.isNative = frame.isNative();
      _frame.pos = frame.getPosition();
      _frame.isCtor = frame.isConstructor();
      _frame.file = path.basename(frame.path);
      _frame.toJSON = toJSON;
      return _frame;
    })(frame));
  }
  return results;
};

module.exports = structuredStackTrace;

//# sourceMappingURL=structured-stack-trace.js.map
